{% extends "base.html" %}
{% block title %}Login â€” groupies.com{% endblock %}

{% block content %}
<style>
  /* page-specific polish (safe to keep inside this template) */
  .login-wrap{min-height:75vh; display:grid; place-items:center;}
  .login-card{ overflow:hidden; }
  .login-hero{
    background: #000 url("{{ url_for('static', filename='unity-joy.jpg') }}") center/cover no-repeat;
    position: relative;
  }
  .login-hero::after{
    content:""; position:absolute; inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.75));
  }
  .hero-inner{ position:relative; z-index:1; }

  /* background-clip text using your hero gif */
  .brand-clip{
    font-weight:900; letter-spacing:.5px;
    font-size: clamp(34px, 6vw, 56px);
    background: url("{{ url_for('static', filename='hero.gif') }}") center/cover no-repeat;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
    text-transform: uppercase;
  }

  /* confetti line under title (optional gif) */
  .confetti{
    height: 6px; border-radius: 999px;
    background: url("{{ url_for('static', filename='confetti.gif') }}") center/cover no-repeat, linear-gradient(90deg,#ff2e63,#f9ed32,#27d17f);
    opacity:.9;
  }

  /* tiny features row */
  .feat .icon{ width:38px; height:38px; display:inline-grid; place-items:center; border-radius:50%;
    border:1px solid rgba(255,255,255,.15); background:rgba(0,0,0,.25); }

  .form-floating>.form-control{background:rgba(255,255,255,.08); border-color:rgba(255,255,255,.18); color:#fff;}
  .form-floating>label{color:#bbb;}
  .form-control:focus{box-shadow:none; border-color:#ff2e63;}
  .link-muted{ color:#9aa0a6; text-decoration:none; }
  .link-muted:hover{ color:#fff; text-decoration:underline; }
</style>

<section class="container login-wrap">
  <div class="row g-0 glass login-card shadow-lg">
    <!-- LEFT: Story/Brand -->
    <div class="col-lg-6 d-none d-lg-block login-hero">
      <div class="hero-inner p-4 p-xl-5">
        <div class="mb-2 confetti"></div>
        <h1 class="brand-clip">Groupies</h1>
        <p class="lead text-white-50 mb-4">
          Eat together. Save together. Join 7 â†’ pay only <span class="text-warning fw-bold">â‚¹777</span>.
        </p>

        <!-- Social proof mini-strip -->
        <div class="d-flex align-items-center gap-3 mb-4">
          <img src="{{ url_for('static', filename='people-smile.jpg') }}" class="rounded-circle" alt="members" style="width:44px;height:44px;object-fit:cover;">
          <div class="small text-white-50">
            3 new tables formed tonight. <span class="text-warning">Unity = savings</span> âœ¨
          </div>
        </div>

        <!-- Features -->
        <div class="row row-cols-3 text-center feat">
          <div class="col">
            <div class="icon mb-2">ðŸ‘¥</div>
            <small class="text-white-50">Meet people</small>
          </div>
          <div class="col">
            <div class="icon mb-2">ðŸ’¸</div>
            <small class="text-white-50">Pay â‚¹777</small>
          </div>
          <div class="col">
            <div class="icon mb-2">âš¡</div>
            <small class="text-white-50">Instant alerts</small>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: Login form -->
    <div class="col-lg-6 bg-dark p-4 p-md-5">
      <div class="mb-4 text-center">
        <div class="fw-bold fs-4">Welcome back ðŸ‘‹</div>
        <div class="text-secondary">Log in to join tables & unlock â‚¹777</div>
      </div>

      {% with msgs = get_flashed_messages(with_categories=true) %}
        {% if msgs %}
          {% for category, message in msgs %}
            <div class="alert alert-{{ 'danger' if category=='error' else category }} py-2">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="POST" novalidate>
        <div class="form-floating mb-3">
          <input name="username" type="text" class="form-control" id="username" placeholder="yourname" required autofocus>
          <label for="username">Username</label>
        </div>

        <div class="mb-2">
          <div class="input-group">
            <div class="form-floating">
              <input id="password" name="password" type="password" class="form-control" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required style="border-top-right-radius:0;border-bottom-right-radius:0;">
              <label for="password">Password</label>
            </div>
            <button type="button" class="btn btn-outline-light" id="togglePwd" tabindex="-1">Show</button>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <small><a class="link-muted" href="#" onclick="alert('Password reset coming soon');return false;">Forgot password?</a></small>
          <small class="text-secondary">No account? <a href="{{ url_for('signup') }}" class="link-warning" style="text-decoration:none;">Sign up</a></small>
        </div>

        <button class="btn btn-brand w-100 py-2 mb-3" type="submit">Login</button>

        <!-- tiny reassurance -->
        <div class="small text-secondary text-center">
          By continuing, you agree to our basic community guidelines: be kind, be on time, and bring your appetite ðŸ˜„
        </div>
      </form>

      <!-- micro â€œwhy Groupiesâ€ footer on small screens -->
      <div class="d-lg-none mt-4">
        <hr class="border-secondary">
        <div class="d-flex align-items-center gap-3">
          <img src="{{ url_for('static', filename='people-smile.jpg') }}" class="rounded" alt="unity" style="width:56px;height:56px;object-fit:cover;">
          <div class="small text-white-50">
            Unity lowers the bill and boosts the vibe. Join a table, meet new people, pay less. ðŸŽ‰
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Show/Hide password
  const btn = document.getElementById('togglePwd');
  const pwd = document.getElementById('password');
  if (btn && pwd){
    btn.addEventListener('click', ()=>{
      const isPwd = pwd.type === 'password';
      pwd.type = isPwd ? 'text' : 'password';
      btn.textContent = isPwd ? 'Hide' : 'Show';
    });
  }
</script>
{% endblock %}
